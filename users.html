<!DOCTYPE html>
<html translate="no">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        .middle {
            text-align: center;
        }

        .right {
            text-align: right;
        }

        .left {
            text-align: left;
        }

        .padding-inner {
            padding-left: 2vw;
            padding-bottom: 0px;
        }

        .padding-top {
            padding-top: 2vh;
            padding-left: 2vw;
        }

        .button-height-38 {
            height: 38px;
        }

        #padding-none {
            padding-left: 0px;
            padding-top: 0px;
            padding-right: 0px;
            padding-bottom: 0px;

        }
    </style>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <title>Users</title>
</head>

<body onload="sortUserView()">
    <div class="row middle">
        <div class="bg-primary" style="font-size: 26pt; width: 100%; color: white; text-align: center;">User Management
        </div>
    </div>
    <div class="container" style="margin-left:2vw;margin:auto;">
        <div class="row">
            <div class="col">

            </div>
            <div class="col right" id="closeWindow">
                <button type="button" class="btn btn-outline-secondary button-height-38"
                style="padding-left: 6px;padding-right: 6px;"> <!-- Add onclick to go back -->
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-x"
                    viewBox="0 0 16 16" style="width:24px;height:29px;padding-bottom:5px">
                    <path
                        d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z" />
                </svg>
            </button>
            </div>
        </div>
    </div>
    <div class="container" style="margin-left:2vw;margin:auto;">
        <div class="border">
            <div class="row padding-top">
                <div class="col-5" style="padding-left:0px;padding-right:0px">
                    <input type="search" class="form-control middle button-height-38" placeholder="Search" value=""
                        id="search" oninput="sortUserView()">
                </div>
                <div class="col-1" style="padding-left:0px;">
                    <button id="searchPreferences" type="button" class="btn btn-outline-secondary button-height-38"
                        data-bs-toggle="modal" data-bs-target="#search-settings"
                        style="padding-left: 6px;padding-right: 6px;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                            class="bi bi-sliders" viewBox="0 0 16 16" style="width:24px;height:29px;padding-bottom:5px">
                            <path fill-rule="evenodd"
                                d="M11.5 2a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM9.05 3a2.5 2.5 0 0 1 4.9 0H16v1h-2.05a2.5 2.5 0 0 1-4.9 0H0V3h9.05zM4.5 7a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM2.05 8a2.5 2.5 0 0 1 4.9 0H16v1H6.95a2.5 2.5 0 0 1-4.9 0H0V8h2.05zm9.45 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm-2.45 1a2.5 2.5 0 0 1 4.9 0H16v1h-2.05a2.5 2.5 0 0 1-4.9 0H0v-1h9.05z" />
                        </svg>
                    </button>
                </div>
                <div class="col-6 right" id="user-bottons" style="padding-right:24px">

                </div>
                <div class="row padding-inner">
                    <div class="col-6" style="max-height:80vh;overflow-y: scroll;padding-left:0px;padding-right:0px">
                        <table class="table table-striped table-bordered">
                            <thead>
                                <tr>
                                    <th style="padding-right:0px">
                                        <div class="row">
                                            <div class="col-9" style="padding-right:0px;width: 112px;">
                                                First Name
                                            </div>
                                            <!-- <div class="col-3" style="padding-left:0px;height: 15px;">
                                                <div class="btn-group-vertical" role="group" style="height: 15px;">
                                                    <button type="button" class="btn" id="padding-none">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-caret-up" viewBox="0 0 16 16">
                                                            <path d="M3.204 11h9.592L8 5.519 3.204 11zm-.753-.659 4.796-5.48a1 1 0 0 1 1.506 0l4.796 5.48c.566.647.106 1.659-.753 1.659H3.204a1 1 0 0 1-.753-1.659z"/>
                                                        </svg>
                                                    </button>
                                                    <button type="button" class="btn" id="padding-none">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-caret-down" viewBox="0 0 16 16">
                                                            <path d="M3.204 5h9.592L8 10.481 3.204 5zm-.753.659 4.796 5.48a1 1 0 0 0 1.506 0l4.796-5.48c.566-.647.106-1.659-.753-1.659H3.204a1 1 0 0 0-.753 1.659z"/>
                                                        </svg>
                                                    </button> 
                                                </div>
                                            </div> -->
                                        </div>
                                    </th>
                                    <th>Last Name</th>
                                    <th>Department</th>
                                    <th>Level</th>
                                    <th style="border-left-width: 0px;
                                    padding-right: 0px;
                                    border-right-width: 0px;
                                    padding-bottom: 0px;
                                    padding-left: 0px;
                                    padding-top: 0px;
                                    width: 45px;"></th>
                                </tr>
                            </thead>
                            <tbody id="usersTable">

                            </tbody>
                        </table>
                        <div id="errorMessageSearch">

                        </div>
                    </div>
                    <div class="col-6 border" style="max-height:80vh;overflow-y: scroll;" id="create-new-user">

                    </div>

                </div>
                <div class="row" id="user-buttons">
                    <div class="col" id="create-new-user-button">
                        <button type="button" class="btn btn-primary" style="position:relative;"
                            onclick="createNewUser()">Create new user</button>
                    </div>
                    <div class="col" id="button-rows">
                        <div class="row">
                            <div class="col-7 right" id="create-new-user-button-2">

                            </div>
                            <div class="col-5 left" id="error-row">

                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <!-- MODALS -->
        <div class="modal fade" id="new-user-confirm" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
            aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-sm ">
                <div class="modal-content">

                    <div class="modal-body">
                        <div class="row">
                            <br>
                        </div>
                        <div class="row">
                            <div class="col-1">

                            </div>
                            <div class="col middle">
                                Are you sure you want to create a new user?
                            </div>
                            <div class="col-1">

                            </div>
                        </div>
                        <div class="row">
                            <br>
                        </div>
                        <div class="row">
                            <div class="col d-grid">
                                <button type="button" class="btn btn-success" data-bs-dismiss="modal"
                                    onclick="confirmNewUser()">Confirm</button>
                            </div>
                            <div class="col d-grid">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="block-confirm" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
            aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-sm ">
                <div class="modal-content">

                    <div class="modal-body">
                        <div class="row">
                            <br>
                        </div>
                        <div class="row">
                            <div class="col-1">

                            </div>
                            <div class="col middle">
                                Are you sure you want to block the user?
                            </div>
                            <div class="col-1">

                            </div>
                        </div>
                        <div class="row">
                            <br>
                        </div>
                        <div class="row">
                            <div class="col d-grid">
                                <button type="button" class="btn btn-success" data-bs-dismiss="modal"
                                    onclick="blockUser()">Confirm</button>
                            </div>
                            <div class="col d-grid">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="unblock-confirm" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
            aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-sm ">
                <div class="modal-content">

                    <div class="modal-body">
                        <div class="row">
                            <br>
                        </div>
                        <div class="row">
                            <div class="col-1">

                            </div>
                            <div class="col middle">
                                Are you sure you want to unblock the user?
                            </div>
                            <div class="col-1">

                            </div>
                        </div>
                        <div class="row">
                            <br>
                        </div>
                        <div class="row">
                            <div class="col d-grid">
                                <button type="button" class="btn btn-success" data-bs-dismiss="modal"
                                    onclick="unblockUser()">Confirm</button>
                            </div>
                            <div class="col d-grid">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- MODAL - changed from a toast because of bootstrap's limited positioning capabilities with toasts -->

        <div class="modal fade" id="saveToastElement" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
            aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-sm ">
                <div class="modal-content">

                    <div class="modal-body">
                        <div class="row">
                            <br>
                        </div>
                        <div class="row">
                            <div class="col-1">

                            </div>
                            <div class="col middle">
                                Changes have been saved
                            </div>
                            <div class="col-1">

                            </div>
                        </div>
                        <div class="row">
                            <br>
                        </div>
                        <div class="row">
                            <div class="col d-grid">
                                <button type="button" class="btn btn-secondary btn-sm btn-block"
                                    data-bs-dismiss="modal">Undo</button>
                            </div>
                            <div class="col d-grid">
                                <button type="button" class="btn btn-primary btn-sm block d-grid"
                                    data-bs-dismiss="modal" onclick="saveUserEditConfirm()">Confirm</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="delete-confirm" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
            aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-sm ">
                <div class="modal-content">

                    <div class="modal-body">
                        <div class="row">
                            <br>
                        </div>
                        <div class="row">
                            <div class="col-1">

                            </div>
                            <div class="col middle">
                                Are you sure you want to delete the user?
                            </div>
                            <div class="col-1">

                            </div>
                        </div>
                        <div class="row">
                            <br>
                        </div>
                        <div class="row">
                            <div class="col d-grid">
                                <button type="button" class="btn btn-success" data-bs-dismiss="modal"
                                    onclick="deleteUser()">Confirm</button>
                            </div>
                            <div class="col d-grid">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="change-password-confirm" data-bs-backdrop="static" data-bs-keyboard="false"
            tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        Change password
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <label for="newPassword" class="col-sm-4 col-form-label">New Password:</label>
                            <div class="col-sm-7">
                                <input type="password" oninput="checkPassword()" class="form-control" id="newPassword"
                                    placeholder='password'>
                            </div>
                        </div>
                        <br>
                        <div class="row">
                            <label for="newPasswordConfirm" class="col-sm-4 col-form-label">Confirm Password:</label>
                            <div class="col-sm-7">
                                <input type="password" oninput="checkPassword()" class="form-control"
                                    id="newPasswordConfirm" placeholder="password">
                            </div>
                        </div>
                        <div class="row" id="errorMessagePassword">
                            <br>
                        </div>

                        <div class="row">
                            <div class="col d-grid" id="change-password-check">
                                <button type="button" class="btn btn-warning" style="color:white" disabled>Change
                                    Password</button>
                            </div>
                            <div class="col d-grid">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="search-settings" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
            aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        Search Preferences
                        
                         <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <label for="department-user-search" class="col-sm-4 col-form-label">Department:</label>
                            <div class="col-sm-7">
                                <select class="form-select" id="department-user-search">
                                    <option value="none" selected>All</option>
                                    <option value="Sales">Sales</option>
                                    <option value="Admin">Admin</option>
                                    <option value="Supervisor">Supervisor</option>
                                </select>
                            </div>
                        </div>
                        <br>
                        <div class="row">
                            <label for="level-user-search" class="col-sm-4 col-form-label">Level:</label>
                            <div class="col-sm-7">
                                <select class="form-select" id="level-user-search">
                                    <option value="none" selected>All</option>
                                    <option value="A1">A1</option>
                                    <option value="A2">A2</option>
                                    <option value="A3">A3</option>
                                </select>
                            </div>
                        </div>
                        <br>
                        <div class="row">
                            <div class="col">

                            </div>
                            <div class="col">

                            </div>
                            <div class="col">
                                <div class="form-check">
                                    <input class="form-check-input col-sm-4" type="checkbox" id="blockedCheckBox">

                                    <label class="form-check-label col-sm-4" for="blockedCheckBox">
                                        Blocked
                                    </label>

                                </div>
                            </div>
                        </div>

                        <br>
                        <div class="row">
                            <div class="col d-grid" id="change-password-check">
                                <button type="button" class="btn btn-success" onclick="saveSearchPreferences();sortUserView()"
                                    style="color:white">Save</button>
                            </div>
                            <div class="col d-grid">
                                <button type="button" class="btn btn-danger"
                                    onclick="resetSearchPreferences()">Reset</button>
                            </div>
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <script src="shared.js"></script>
        <script src="users.js"></script>
        
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js"
            integrity="sha384-Xe+8cL9oJa6tN/veChSP7q+mnSPaj5Bcu9mPX5F5xIGE0DVittaqT5lorf0EI7Vk"
            crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.min.js"
            integrity="sha384-ODmDIVzN+pFdexxHEHFBQH3/9/vQ9uori45z4JjnFsRydbmQbmL5t1tQ0culUzyK"
            crossorigin="anonymous"></script>
</body>

</html>